(()=>{"use strict";class e{constructor(e){return this.element=document.createElement(e),this}attr(e,t){return this.element.setAttribute(e,t),this}class(e){return this.element.classList.add(e),this}classes(e){return e.forEach((e=>{this.element.classList.add(e)})),this}event(e,t){return this.element.addEventListener(e,t),this}append(e){return this.element.appendChild(e),this}renderTo(e){return e.appendChild(this.element),this}html(e){return this.element.innerHTML=e,this}appendHtml(e){return this.element.innerHTML+=e,this}}class t{constructor(e){this.lightboxImages=e||[],this.currentImageIndex=0,this.addClickEvent()}addClickEvent(){this.lightboxImages.forEach(((e,t)=>{e.addEventListener("click",(()=>this.openLightbox(t)))})),document.addEventListener("click",(e=>{e.target.classList.contains("lightbox-overlay")&&this.closeLightbox()})),document.addEventListener("keydown",(e=>{"ArrowRight"===e.key&&this.showNextImage()})),document.addEventListener("keydown",(e=>{"ArrowLeft"===e.key&&this.showPreviousImage()}))}openLightbox(e){this.currentImageIndex=e;const t=document.createElement("div");t.classList.add("lightbox-overlay"),document.body.appendChild(t);const n=document.createElement("img");n.src=this.lightboxImages[e].src,n.classList.add("lightbox-image"),t.appendChild(n);const s=document.createElement("button");s.innerHTML="&times;",s.classList.add("lightbox-close"),s.addEventListener("click",(()=>this.closeLightbox())),t.appendChild(s),document.body.style.overflow="hidden",document.addEventListener("keydown",(e=>{"Escape"===e.key&&this.closeLightbox()}))}closeLightbox(){const e=document.querySelector(".lightbox-overlay");e&&e.remove(),document.body.style.overflow="auto"}showNextImage(){this.currentImageIndex=(this.currentImageIndex+1)%this.lightboxImages.length,this.updateLightboxImage()}showPreviousImage(){this.currentImageIndex=(this.currentImageIndex-1+this.lightboxImages.length)%this.lightboxImages.length,this.updateLightboxImage()}updateLightboxImage(){const e=document.querySelector(".lightbox-image");e&&(e.src=this.lightboxImages[this.currentImageIndex].src)}}const n=class{constructor(t){this.popupId=t,this.popupUi=new e("div").classes(["fixed","left-0","top-0","w-full","h-full","bg-primary-dark-full","bg-opacity-40","zi-10"]),this.popupInner=new e("div").classes(["popup-content","m-10","p-10","h-full","border","border-slate-600","rounded-md","bg-custom-bg","max-h-full"]).element;const n=new e("button").classes(["absolute","top-0","right-0","m-2","cursor-pointer","text-5xl","font-light","leading-3"]).html("&times;").event("click",(()=>this.close())).element,s=new e("div");s.append(n),this.popupUi.append(s.element),this.popupUi.append(this.popupInner),this.outer=new e("div").classes(["absolute","left-0","top-0","w-full","h-full","z-[-1]"]),this.outer.event("click",(e=>{this.close()})),this.popupUi.append(this.outer.element)}open(){return new Promise(((e,t)=>{this.loadContent().then((()=>{this.renderToBody(),e()})).catch((e=>{console.error("Error loading content:",e),t(e)}))}))}close(){this.popupUi.element.remove()}loadContent(){return new Promise(((e,t)=>{const n=new XMLHttpRequest;n.onreadystatechange=()=>{4===n.readyState&&(200===n.status?(this.popupInner.innerHTML=n.responseText,e()):t(new Error(`Failed to load content. Status: ${n.status}`)))},n.open("GET","./popups/"+this.popupId+".html",!0),n.send()}))}renderToBody(){document.body.appendChild(this.popupUi.element);const e=this.popupUi.element.querySelectorAll(".lightbox");new t(Array.from(e))}};(new class{constructor(){this.back2Top=this.back2Top.bind(this),this.nav=this.nav.bind(this),this.headerPos=null}handleButtonClick(e){const t=e.target.dataset.popup;new n(t).open()}popupInit(){document.querySelectorAll(".popup-button").forEach((e=>{e.addEventListener("click",this.handleButtonClick)}))}back2Top(){const e=document.getElementById("back-to-top-btn");e.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})})),window.addEventListener("scroll",(()=>{window.scrollY>200?e.classList.remove("hidden"):e.classList.add("hidden")}))}nav(){const e=document.querySelector('[aria-controls="mobile-menu"]'),t=document.getElementById("mobile-menu"),n=document.querySelector("header"),s=document.querySelector("main");e.addEventListener("click",(()=>{t.classList.toggle("hidden")}));const i=document.querySelectorAll('a[href^="#"]');i.forEach((e=>{e.addEventListener("click",(s=>{s.preventDefault();const o=e.getAttribute("href").substring(1),r=document.getElementById(o);r&&(window.scrollTo({top:r.offsetTop-n.offsetHeight,behavior:"smooth"}),i.forEach((e=>{"home"!=e.getAttribute("href").substring(1)&&(e.classList.remove("text-primary-color","active"),e.classList.add("text-gray-300","hover:text-primary-color"))})),"home"!=o&&e.classList.add("text-primary-color","active"),t.classList.add("hidden"))}))})),window.addEventListener("scroll",(()=>{this.headerPos||(this.headerPos=n.getBoundingClientRect()),window.scrollY>n.offsetHeight?(n.classList.add("fixed","z-50","fixed-header"),n.style.left=`${this.headerPos.x}px`,s.style.paddingTop=this.headerPos.height+"px",n.style.top="0px",n.style.width=`${this.headerPos.width}px`):(n.classList.remove("fixed","z-50","fixed-header"),s.style.paddingTop=0)}))}typeEffect(){document.querySelectorAll("[data-typing]").forEach((function(e){var t=e.dataset.typing.split("|").map((function(t){return e.removeAttribute("data-typing"),t.trim()})),n=0,s="",i=!1;!function o(){var r=100;i?(s=t[n].substring(0,s.length-1),r=50):s=t[n].substring(0,s.length+1),e.innerHTML=s,i||s!==t[n]?i&&""===s&&(i=!1,n=(n+1)%t.length,r=200):(i=!0,r=500),setTimeout(o,r)}()}))}hilighter(){var e=document.querySelector(".highlight"),t=e.textContent.split("").map((function(e,t){return'<span style="animation-delay: '+(.1*(t+1)).toFixed(1)+'s;">'+e+"</span>"})).join("");e.innerHTML=t}lightboxInit(){const e=document.querySelectorAll(".lightbox");new t(Array.from(e))}ntf(e,t,n,s){const i=e,o=document.createElement("div");o.classList.add("py-2","px-4","rounded","mb-2","text-sm",n,s),o.innerText=t,i.appendChild(o),setTimeout((()=>{o.remove()}),5e3)}async submitForm(e){e.preventDefault();const t=e.target,n=t.querySelector("button");n.innerText="Sending...",n.disabled=!0;try{const e=await fetch(t.action,{method:"POST",body:new FormData(t)});(await e.json()).success?(this.ntf(t,"Form submitted successfully!","text-green-700","bg-green-100"),t.reset()):this.ntf(t,"Form submission failed. Please try again.","text-red-700","bg-red-100")}catch(e){console.error("Error submitting form:",e),this.ntf(t,"An error occurred. Please try again later.","text-red-700","bg-red-100")}finally{n.innerText="Send",n.disabled=!1}}init(){document.addEventListener("DOMContentLoaded",(()=>{this.typeEffect(),this.hilighter(),this.nav(),this.back2Top(),this.popupInit(),this.lightboxInit(),document.getElementById("contactForm").addEventListener("submit",this.submitForm.bind(this))}))}}).init()})();